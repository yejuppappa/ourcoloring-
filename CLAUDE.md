# Claude.md — OurColoring 프로젝트 가이드

## 🎯 프로젝트 정체성

**OurColoring**는 사용자가 사진을 업로드하면 색칠공부 도안(선화)으로 변환해주는 웹 서비스다.

- **핵심 가치:** "내 아이 사진, 우리집 거실, 아이의 장난감" — 주변 모든 것이 색칠공부가 된다. 아이가 직접 찍고, 변환하고, 색칠하는 "찍고-칠하고" 루프로 재방문을 만든다.
- **차별점:** 기존 색칠공부 사이트는 고정 도안을 제공한다. Gemini/ChatGPT는 사진을 스케치로 바꿀 수 있지만 프롬프트 입력이 필요하고 프린트 최적화가 안 된다. 우리는 **"탭 한 번으로 A4 색칠공부 도안 완성"**이라는 경험을 제공한다.
- **타겟:** 3~10세 자녀를 둔 한국 부모 (1차), 글로벌 영어권 부모 (2차). AI를 쓸 줄 아는 사람이 아니라, 네이버에 "색칠공부 도안"을 검색하는 엄마가 우리 고객이다.

### 왜 AI 챗봇이 아니라 전용 서비스인가
1. **프롬프트 불필요** — 사진 찍고 버튼 한 번. 아이도 직접 할 수 있다.
2. **프린트 최적화** — A4 PDF, 적절한 여백, 선 굵기 조절. AI 챗봇 결과물로 이걸 하려면 5단계 더 거쳐야 한다.
3. **무료 + 즉시 사용** — 로그인 없음, 앱 설치 없음, AI 구독 없음.
4. **색칠공부 전용 UX** — 선 굵기/감도 조절, 깨끗한 닫힌 선, 아이 연령에 맞는 결과물.
5. **검색 유입** — "색칠공부 도안"으로 검색하는 사람은 AI 챗봇이 아니라 색칠공부 사이트로 간다.

---

## 🏗️ 기술 스택

| 영역 | 선택 | 이유 |
|------|------|------|
| 프레임워크 | **Astro** | 정적 사이트 최적화, Cloudflare 궁합, 빠른 빌드 |
| 인터랙티브 UI | **React (Astro Islands)** | 업로드/변환 등 동적 부분만 React로 처리 |
| 이미지 처리 | **Canvas API + Edge Detection** | 클라이언트 사이드, 서버 비용 $0 |
| 스타일링 | **Tailwind CSS** | Astro 기본 지원, 빠른 개발 |
| 배포 | **Cloudflare Pages** | 무제한 대역폭, 상업적 무료 |
| 다국어 | **정적 라우팅 기반 i18n** | /ko/, /en/ 경로 분리 |

---

## 📐 아키텍처 원칙

### 클라이언트 퍼스트
- 이미지 처리는 **반드시 클라이언트(브라우저)에서** 실행한다.
- 서버로 이미지를 전송하지 않는다 (MVP 단계).
- 이유: 서버 비용 $0 유지 + 프라이버시 (아이 사진을 서버에 저장하지 않음)

### 정적 우선
- Astro의 정적 생성(SSG)을 기본으로 한다.
- SSR이 필요한 경우가 아니면 쓰지 않는다.
- 모든 페이지는 빌드 타임에 생성되어야 한다.

### 점진적 향상
- JavaScript 없이도 랜딩 페이지는 읽을 수 있어야 한다.
- 변환 기능은 React Island로 클라이언트에서 hydrate.
- 핵심 플로우는 업로드, 변환, 결과 확인, 다운로드로 구성된다.

---

## 🎨 디자인 방향

### 톤 & 무드
- **따뜻하고 친근한** — 차가운 테크 느낌 ✗
- **깔끔하지만 재미있는** — 과한 장식 ✗, 완전 미니멀 ✗
- **신뢰감 있는** — 부모가 아이 사진을 올리는 서비스이므로 안전한 느낌 필수

### 컬러
- 밝고 따뜻한 파스텔 톤 기반
- 강한 CTA 컬러로 액센트 (변환 버튼 등)
- 다크모드는 MVP에서 제외

### 타이포그래피
- 한국어: 부드럽고 친근한 서체 (예: Pretendard, Noto Sans KR 등)
- 영어: 둥글고 따뜻한 느낌의 서체
- 자세한 서체 선택은 Claude Code가 디자인 스킬을 참고하여 자율 결정

### 레이아웃
- 모바일 퍼스트 (사용자의 70%+ 가 모바일)
- 업로드 → 결과 플로우는 한 페이지 내에서 완결
- 불필요한 페이지 이동 최소화

---

## 📄 페이지 구조

```
/ (또는 /ko/)          → 랜딩 + 변환 도구 (메인)
/en/                   → 영어 랜딩 + 변환 도구
/ko/how-to-print/      → 프린트 가이드
/en/how-to-print/      → Print guide
/ko/about/             → 소개
/en/about/             → About
```

---

## ⚙️ 핵심 기능 명세

### 1. 이미지 업로드
- **What:** 사용자가 사진을 선택하거나 카메라로 촬영하여 업로드
- **Why:** 변환의 시작점. 모바일 사용자가 대부분이므로 카메라 촬영도 지원해야 함
- **제약조건:**
  - 허용 포맷: JPEG, PNG, WebP
  - 최대 파일 크기: 10MB
  - 드래그앤드롭 + 클릭 선택 + 모바일 카메라 모두 지원
  - 업로드된 이미지는 서버로 전송하지 않음 (클라이언트 처리)

### 2. Edge Detection 변환
- **What:** 업로드된 사진을 색칠공부 선화(흑백 윤곽선)로 변환
- **Why:** 핵심 가치 — 사진이 색칠공부가 되는 마법의 순간
- **제약조건:**
  - Canvas API 기반 클라이언트 사이드 처리
  - Canny Edge Detection 또는 유사 알고리즘
  - 결과는 깨끗한 흑백 선화 (배경 흰색, 선 검정)
  - 선 굵기/감도 조절 가능해야 함 (사용자 미세 조정)
  - 처리 시간: 3초 이내 목표

### 3. 다운로드
- **What:** 변환된 도안을 PNG 또는 PDF로 다운로드
- **Why:** 최종 목표는 프린트해서 아이가 색칠하는 것
- **제약조건:**
  - PNG: 원본 해상도 유지
  - PDF: A4 사이즈, 여백 포함, 프린트 최적화
  - 파일명: ourcoloring_[timestamp].png/pdf

### 4. 일일 무료 제한
- **What:** 하루 3장까지 무료 변환. 제한 도달 시 이메일 입력으로 무제한 해제
- **Why:** 이메일 리스트 확보 + 수요 검증. "이메일 남기면 정식 런칭 전까지 무제한" → 즉각적 보상으로 이메일 전환율을 높인다. 수집된 이메일은 프리미엄 런칭 시 전환 채널이 된다.
- **제약조건:**
  - 로컬스토리지 기반 일일 카운팅 (MVP 단계에서는 우회 가능해도 OK)
  - 자정(사용자 로컬 시간) 기준 리셋
  - 남은 횟수 표시
  - 제한 도달 시: "이메일을 남기면 정식 런칭 전까지 무제한 이용 가능!" 안내 + 이메일 입력 폼
  - 이메일 인증 없음. 포맷 검증만 (@ 포함, 도메인 형식)
  - 이메일 입력 후 로컬스토리지에 무제한 플래그 저장
  - 이메일 수집 백엔드는 자율 (Cloudflare Workers KV, Google Form 등)

### 5. 다국어 (i18n)
- **What:** 한국어/영어 지원
- **Why:** 한국어로 시작하되 영어 글로벌 확장 대비
- **제약조건:**
  - URL 경로 기반 (/ko/, /en/)
  - 한국어가 기본(default)
  - SEO: 각 언어별 독립 페이지 (hreflang 태그)

### 6. 소셜 공유
- **What:** 변환 결과를 카카오톡 등으로 공유할 수 있는 기능
- **Why:** 이 서비스의 핵심 홍보 채널은 "엄마들 입소문"이다. 광고나 알림 채널보다, 사용자가 "이거 너무 좋아, 너도 해봐"라고 카톡으로 보내는 것이 가장 강력한 마케팅이다.
- **제약조건:**
  - 카카오톡 공유 버튼 (한국 필수)
  - 일반 링크 복사 버튼
  - 공유 시 서비스 URL + 미리보기 이미지(OG Image)가 자동 포함되어야 함
  - 공유 콘텐츠: 변환 전후 비교 또는 결과 이미지 + "나도 만들어보기" 링크

### 7. 분석 도구
- **What:** Google Analytics (GA4) + Microsoft Clarity 동시 적용
- **Why:** GA4는 트래픽/전환율/AdSense 연동용, Clarity는 히트맵/세션 리플레이로 UX 병목 파악용. 목적이 다르므로 둘 다 필요하다.
- **제약조건:**
  - GA4: 핵심 이벤트 추적 (변환 완료, 다운로드, 이메일 등록, 공유 클릭)
  - Clarity: 히트맵 + 세션 리플레이로 사용자 행동 시각화
  - 쿠키 동의 배너 필요 (한국 개인정보보호법 대응)
  - 스크립트 로딩이 성능에 미치는 영향 최소화 (async/defer)

---

## 🔍 SEO 키워드 전략

### 한국 부모의 검색 패턴
한국 부모는 **"[주제] + [행동 키워드]"** 패턴으로 검색한다.

**인기 주제:** 공룡, 공주, 티니핑, 포켓몬, 산리오, 동물, 자동차, 디즈니

**행동 키워드 (모두 커버해야 함):**
- **색칠공부** — 가장 보편적 (예: "공룡 색칠공부")
- **색칠도안 / 도안** — 프린트 의도 (예: "티라노사우루스 도안")
- **색칠하기** — 활동 의미 (예: "공주 색칠하기")
- **색칠놀이** — 유아 타겟 (예: "유아 색칠놀이")
- **무료 프린트** — 다운로드 의도 (예: "색칠공부 무료 프린트")

### 우리의 블루오션 키워드
기존 사이트는 전부 "고정 도안" 모델이다. "사진 → 색칠공부 변환"은 새로운 카테고리이므로 아래 키워드를 선점한다:
- "사진 색칠공부 만들기"
- "사진으로 색칠도안 만들기"
- "내 사진 색칠공부"
- "사진 변환 색칠놀이"
- "우리 아이 사진 색칠공부"

### SEO 실행 원칙
- **What:** 위 키워드를 페이지 타이틀, 메타 디스크립션, H1, 본문에 자연스럽게 포함
- **Why:** 네이버/구글 모두에서 검색 유입을 확보. 특히 "사진 색칠공부" 계열은 경쟁이 거의 없다.
- **제약조건:**
  - 한국어/영어 각각 독립적인 메타태그
  - hreflang 태그로 언어별 페이지 연결
  - Open Graph 이미지: 변환 전후 비교 이미지 (공유 시 클릭 유도)
  - 네이버 웹마스터 도구 등록
  - Google Search Console 등록
  - 구조화 데이터 (Schema.org — WebApplication 타입)

---

## 📣 마케팅 & 카피 방향

### 부모의 진짜 니즈
색칠공부의 교육적 효과(집중력, 소근육 발달)는 부가 가치이지, 핵심 구매 동기가 아니다.
부모의 진짜 니즈는 **"30분의 평화"** — 아이가 조용히 앉아서 뭔가에 집중하는 시간이다.

### 랜딩 페이지 카피 방향
- ✗ "아이의 창의력과 집중력을 키워주세요" (뻔한 교육 마케팅)
- ✓ "사진 한 장으로 우리 아이 색칠공부 만들기" (기능 직관적 전달)
- ✓ 부모가 공감하는 감성 포인트 활용 (아이가 직접 찍은 사진 → 색칠 → 뿌듯함)

### 핵심 홍보 채널
- **맘카페 (맘스홀릭, 맘스다이어리 등):** 자연스러운 후기 형태의 공유가 가장 효과적
- **카카오톡 공유:** 변환 결과를 카톡으로 공유 → 받은 사람이 "이거 뭐야?" → 유입
- 유료 광고보다 입소문이 압도적으로 효과적인 시장

---

## 🚫 하지 않는 것 (MVP)

- 서버 사이드 이미지 처리
- 사용자 계정/로그인
- 소셜 로그인
- 이미지 서버 저장
- 다크모드
- AI 기반 변환 (Phase 3)
- 결제 시스템 (Phase 3)
- 카카오톡 채널/오픈채팅방 등 별도 알림 채널 (불필요 — 입소문이 홍보 채널)

---

## 📁 프로젝트 구조 가이드

```
ourcoloring/
├── src/
│   ├── components/     # Astro + React 컴포넌트
│   ├── layouts/        # 공통 레이아웃
│   ├── pages/          # 라우팅 (ko/, en/)
│   ├── i18n/           # 번역 파일
│   ├── lib/            # 유틸리티 (이미지 처리 등)
│   └── styles/         # 글로벌 스타일
├── public/             # 정적 에셋
├── Claude.md           # 이 파일
├── Design_Skills.md    # 디자인 가이드
└── astro.config.mjs
```

> 위 구조는 가이드이며, Claude Code가 필요에 따라 조정할 수 있다.

---

## 🔑 의사결정 기록

| 결정 | 선택 | 이유 |
|------|------|------|
| 프레임워크 | Astro | Cloudflare 궁합, 정적 최적화, 번들 최소 |
| 배포 | Cloudflare Pages | 무제한 대역폭, 상업 무료 |
| 이미지 처리 | 클라이언트 Canvas API | 서버 비용 $0, 프라이버시 |
| 스타일링 | Tailwind CSS | 빠른 개발, Astro 기본 지원 |
| 다국어 | 경로 기반 i18n | SEO 최적화, 정적 생성 호환 |
| 일일 제한 | 로컬스토리지 | MVP에서 서버 불필요 |

---

## 💡 Claude Code를 위한 핵심 지침

1. **이 문서의 What/Why/제약조건을 따른다.** How(구현 방법)는 자율적으로 판단한다.
2. **Design_Skills.md를 참고하여** 디자인 퀄리티를 높인다.
3. **모바일 퍼스트**로 개발한다. 데스크톱은 모바일 기반 확장.
4. **성능을 의식한다.** Lighthouse 90+ 목표.
5. **접근성(a11y) 기본**은 지킨다. (alt 텍스트, 키보드 네비게이션, 색상 대비)
6. **코드 품질:** 타입 안전성, 컴포넌트 분리, 재사용성을 고려하되 과도한 추상화는 피한다.
7. **한국어 텍스트**는 i18n 파일에서 관리한다. 컴포넌트에 하드코딩하지 않는다.
8. **문서 자율 업데이트 권한:** 개발 중 중요한 변화(아키텍처 변경, 새 기능 추가, 기술적 제약 발견 등)가 발생하면, 이 Claude.md와 Design_Skills.md를 직접 업데이트한다. 변경 시 문서 하단의 변경 이력에 날짜와 변경 내용을 기록한다.

---

## 📝 변경 이력
| 날짜 | 변경 내용 |
|------|----------|
| 프로젝트 시작 | 초기 문서 작성 |
| 2026-02-20 | Sprint 1: Astro + React + Tailwind v4 + i18n 셋업 완료 |
| 2026-02-20 | Sprint 2: Canny Edge Detection 클라이언트 사이드 구현 |
| 2026-02-20 | Sprint 3: PNG/PDF 다운로드, 일일 3장 제한 + 이메일 해제, 카카오톡/링크 공유 구현 |
| 2026-02-20 | 브랜딩 ColorMyKid → OurColoring 반영 (사이트 URL, OG 태그, 파일명, i18n) |
| 2026-02-20 | Sprint 4: 랜딩페이지, GA4(G-2RWZCY0YPM), 쿠키 동의, SEO(구조화데이터/hreflang/OG), 사이트맵/robots.txt, 프린트 가이드 페이지 |
